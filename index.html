<style>
    /* ... (bestaande stijlen blijven gelijk, pas deze specifieke aan) ... */
    .logo-container { 
        width: 55px; 
        height: 55px; 
        min-width: 55px; 
        margin-right: 15px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        border-radius: 50%; 
        background: #007bff; /* Standaardkleur */
        overflow: hidden; 
        font-weight: bold; 
        color: white; 
        border: 1px solid #ddd;
    }
    .logo-img { 
        width: 90%; /* Iets kleiner dan 100% voor een mooie marge */
        height: 90%; 
        object-fit: contain; /* DIT ZORGT VOOR HET SCALEN */
        display: block;
    }
    
    /* Extra stijl voor witte achtergrond bij logo's */
    .has-logo { background: white !important; }
</style>

<script>
    // Update deze functie voor de intelligente scaling en kleur
    function getLogoHtml(card, size = 45) {
        const letter = card.name ? card.name.charAt(0).toUpperCase() : '?';
        const bgColor = card.color || '#007bff';
        const containerClass = card.logo ? 'logo-container has-logo' : 'logo-container';
        
        return `
            <div class="${containerClass}" style="width:${size}px; height:${size}px; min-width:${size}px; background-color:${bgColor};">
                ${card.logo ? 
                    `<img src="${card.logo}" class="logo-img" onerror="this.style.display='none'; this.parentElement.classList.remove('has-logo'); this.parentElement.innerHTML='${letter}';">` : 
                    letter}
            </div>`;
    }

    // Voeg dit toe aan de openEdit functie om de kleurkiezer te ondersteunen
    function openEdit(index) {
        currentEditIndex = index;
        tempBase64 = null;
        const c = cards[index];
        document.getElementById('editName').value = c.name;
        document.getElementById('editCode').value = c.code;
        document.getElementById('editLogoUrl').value = (c.logo && !c.logo.startsWith('data:')) ? c.logo : '';
        
        // Voeg een kleurkiezer toe aan je modal HTML als je die nog niet had
        if (!document.getElementById('editColor')) {
            const colorLabel = document.createElement('label');
            colorLabel.innerText = "Bolletjeskleur (als er geen logo is)";
            const colorInput = document.createElement('input');
            colorInput.type = 'color';
            colorInput.id = 'editColor';
            colorInput.style.height = '40px';
            document.getElementById('editCode').after(colorInput);
            document.getElementById('editCode').after(colorLabel);
        }
        document.getElementById('editColor').value = c.color || '#007bff';
        document.getElementById('editModal').style.display = 'flex';
    }

    // Update de confirmEdit functie om de kleur op te slaan
    function confirmEdit() {
        const c = cards[currentEditIndex];
        c.name = document.getElementById('editName').value;
        c.code = document.getElementById('editCode').value;
        c.color = document.getElementById('editColor').value;
        
        const urlInput = document.getElementById('editLogoUrl').value;
        if (tempBase64) {
            c.logo = tempBase64;
        } else if (urlInput) {
            c.logo = urlInput;
        }

        localStorage.setItem('myCards', JSON.stringify(cards));
        location.reload();
    }
</script>
